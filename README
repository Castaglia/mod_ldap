mod_ldap v2.6.1
===============

mod_ldap is a module that allows proftpd to do user authentication and
name/UID lookups against an LDAP database.

**Please note:** some of the basic configuration directives changed in
version 2.0 of mod_ldap; please read the included documentation carefully
to find out what you will need to update in your proftpd.conf.


Sections:
1. How do I set up mod_ldap?
2. To-Do
3. Thanks
4. Author
5. Bug Reports


============================
1. How do I set up mod_ldap?
============================

I've only tested mod_ldap with recent versions of OpenLDAP-stable, but
others are using an unmodified mod_ldap with Netscape Directory Server (on
Solaris) and the IBM SecureWay LDAP server (on AIX).

1. Add the following schema to your slapd.oc.conf (or equivalent) and
   restart your LDAP server:

objectclass posixAccount
    requires
        objectclass,
        cn,
        uid,
        uidNumber,
        gidNumber,
        homeDirectory
    allows
        userPassword,
        loginShell,
        gecos,
        description

If you plan on using mod_ldap for group lookups, also add the following
schema.

objectclass posixGroup
    requires
        gidNumber
    allows
        userPassword,
        memberUid,
        description


2. Create an ldif file and add it to your LDAP server by saying: ldapadd -D
   your-root-dn -w your-root-dn-password < ldif-file

A sample ldif is included here:

dn: cn=John Morrissey, dc=horde, dc=net
cn: John Morrissey
uid: jwmsax
uidNumber: 2000
gidNumber: 100
homeDirectory: /home/jwm
userPassword: {crypt}SosPSqZVHbI5Y
loginShell: /bin/bash

3. Read up on the LDAP config-file directives in doc/Configuration.html. At
bare minimum, you'll need to have LDAPServer, LDAPDNInfo, and LDAPDoAuth
configuration directives in your proftpd.conf.

A sample set of LDAP configuration directives is included here:

LDAPServer            localhost
LDAPDNInfo            cn=your-dn,dc=horde,dc=net dnpass
LDAPDoAuth            on "dc=users,dc=horde,dc=net"

========
2. To-Do
========

* Runtime specification of an LDAP search filter - this is in my latest
  development branch; if you'd like a copy, just ask.
* different log levels in mod_ldap to log varying debug info
* perror()-like error reporting to improve error messages
* shadowAccount objectclass stuff - inactive, expiration, etc.

=========
3. Thanks
=========

* James <james@wwnet.net> for a copy of his LDAP module that he never released
* Krzysztof Dabrowski <brush@pol.pl> for some big virtual-user ideas
* Peter Deacon <peterd@iea-software.com> for ideas
* Peter Fabian <fabian@staff.matavnet.hu> for ideas and a tested platform
* Pierrick Hascoet <pierrick@alias.fr> for implementing OpenSSL password
  hash support
* Ralf Kruedewagen <Ralf.Kruedewagen@meocom.de> for a tested platform
* Scott Murphy <smurphy@berbee.com> for a trouble report
* Miguel Barreiro Paz <mbpaz@edu.aytolacoruna.es> for a supported platform
  and new supported LDAP server
* Bert Vermeulen <bert@be.easynet.net> for patches
* Everyone else who has sent feedback on mod_ldap

=========
4. Author
=========

John Morrissey, <jwm@horde.net>, http://horde.net/~jwm/software/mod_ldap
Feedback is much appreciated. If you're using mod_ldap successfully, or
you're having problems getting mod_ldap up and running at your site, or
even have some code improvements or ideas for development, please let
me know!

==============
5. Bug Reports
==============

Bug reports/requests for assistance are welcomed, and I will answer them as
my time permits. Please, please, please if you submit a bug report/request
for assistance, please include the following things:

* Version of mod_ldap and ProFTPD and which OS you're running them on
* Name/version of your LDAP server
* Relevant portions of your proftpd.conf
* Relevant portions of your LDAP server's query logs - these are very
  important; extra debugging information is not needed. For example, if
  you're running OpenLDAP, run slapd *without* the -s option and include
  what slapd leaves in your syslogs.
